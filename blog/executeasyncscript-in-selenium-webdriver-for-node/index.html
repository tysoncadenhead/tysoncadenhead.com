<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>executeAsyncScript() in Selenium Webdriver for Node</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="../assets/built/screen.css">

    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="canonical" href="http://tysoncadenhead.com/executeasyncscript-in-selenium-webdriver-for-node/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="http://tysoncadenhead.com/executeasyncscript-in-selenium-webdriver-for-node/amp/">
    
    <meta property="og:site_name" content="Tyson Cadenhead">
    <meta property="og:type" content="article">
    <meta property="og:title" content="executeAsyncScript() in Selenium Webdriver for Node">
    <meta property="og:description" content="If you aren&#x27;t familiar with it, the NodeJS version of the Selenium WebDriver is a great way to write functional tests in JavaScript and automatically run them in your browsers. The NodeJS WebDriver uses the Selenium Server Java jar under the covers to work its magic. The main downside of">
    <meta property="og:url" content="http://tysoncadenhead.com/executeasyncscript-in-selenium-webdriver-for-node/">
    <meta property="og:image" content="../content/images/2017/09/12-3.png">
    <meta property="article:published_time" content="2013-03-22T08:01:00.000Z">
    <meta property="article:modified_time" content="2017-09-26T02:48:56.000Z">
    <meta property="article:publisher" content="https://www.facebook.com/tysoncadenhead">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="executeAsyncScript() in Selenium Webdriver for Node">
    <meta name="twitter:description" content="If you aren&#x27;t familiar with it, the NodeJS version of the Selenium WebDriver is a great way to write functional tests in JavaScript and automatically run them in your browsers. The NodeJS WebDriver uses the Selenium Server Java jar under the covers to work its magic. The main downside of">
    <meta name="twitter:url" content="http://tysoncadenhead.com/executeasyncscript-in-selenium-webdriver-for-node/">
    <meta name="twitter:image" content="http://tysoncadenhead.com/content/images/2017/09/12-3.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Tyson Cadenhead">
    <meta name="twitter:site" content="@tysoncadenhead">
    <meta property="og:image:width" content="1391">
    <meta property="og:image:height" content="800">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Tyson Cadenhead",
        "logo": "http://tysoncadenhead.com/content/images/2017/09/1-2.png"
    },
    "author": {
        "@type": "Person",
        "name": "Tyson Cadenhead",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/283773207d6e2c2b9f2a86f7088a7328?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "http://tysoncadenhead.com/author/tysoncadenhead/",
        "sameAs": []
    },
    "headline": "executeAsyncScript() in Selenium Webdriver for Node",
    "url": "http://tysoncadenhead.com/executeasyncscript-in-selenium-webdriver-for-node/",
    "datePublished": "2013-03-22T08:01:00.000Z",
    "dateModified": "2017-09-26T02:48:56.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "http://tysoncadenhead.com/content/images/2017/09/12-3.png",
        "width": 1391,
        "height": 800
    },
    "description": "If you aren&#x27;t familiar with it, the NodeJS version of the Selenium WebDriver is a great way to write functional tests in JavaScript and automatically run them in your browsers. The NodeJS WebDriver uses the Selenium Server Java jar under the covers to work its magic. The main downside of",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://tysoncadenhead.com/"
    }
}
    </script>

    <script type="text/javascript" src="../public/ghost-sdk.js"></script>
<script type="text/javascript">
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "f70092546f32"
});
</script>
    <meta name="generator" content="Ghost 1.8">
    <link rel="alternate" type="application/rss+xml" title="Tyson Cadenhead" href="http://tysoncadenhead.com/rss/">

</head>
<body class="post-template">

    <div class="site-wrapper">

        

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
                <a class="site-nav-logo" href="../"><img src="../content/images/2017/09/1-2.png" alt="Tyson Cadenhead"></a>
            <ul class="nav">
    <li class="nav-blog" role="presentation"><a href="../">Blog</a></li>
    <li class="nav-about-me" role="presentation"><a href="../about/">About Me</a></li>
</ul>
    </div>
    <div class="site-nav-right">
        <div class="social-links">
                <a class="social-link social-link-fb" href="https://www.facebook.com/tysoncadenhead" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
</a>
                <a class="social-link social-link-tw" href="https://twitter.com/tysoncadenhead" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
        </div>
            <a class="subscribe-button" href="#subscribe">Subscribe</a>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer" role="main">
    <figure class="post-full-image" style="background-image: url(../content/images/2017/09/12-3.png)">
    </figure>
    <div class="inner">

        <article class="post-full post ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="2013-03-22">22 March 2013</time>
                </section>
                <h1 class="post-full-title">executeAsyncScript() in Selenium Webdriver for Node</h1>
            </header>

            <section class="post-full-content">
                <div class="kg-card-markdown"><p>If you aren't familiar with it, the <a href="https://code.google.com/p/selenium/wiki/WebDriverJs">NodeJS version of the Selenium WebDriver</a> is a great way to write functional tests in JavaScript and automatically run them in your browsers.</p>
<!-- more -->
<p>The NodeJS WebDriver uses the <a href="https://code.google.com/p/selenium/downloads/list">Selenium Server</a> Java jar under the covers to work its magic.</p>
<p>The main downside of the WebDriver is that the documentation is inconclusive at best. I haven't been able to locate a unified list of the WebDriver methods anywhere on the internet. I'm not even kidding. The best that I have been able to do is look at the Java documentation and make assumptions based it.</p>
<p>My main struggle was finding a way to execute asynchronous JavaScript in a browser and send a callback to the server-side testing suite once the script had finished manipulating the DOM or running Ajax calls. The solution I was finally able to locate was the executeAsyncScript() method.</p>
<p>I wrote my unit tests using <a href="http://visionmedia.github.com/mocha/">Mocha</a>. The code below is what I used to kick off the testing suite. Note that you will need to install the <a href="https://code.google.com/p/selenium/downloads/list">Java jar file</a> and open it, install the <a href="https://code.google.com/p/selenium/downloads/list">Crome driver</a> and open it and of course install the <a href="https://npmjs.org/package/selenium-webdriver%E2%80%9C">“selenium-webdriver“</a> and <a href="https://npmjs.org/package/assert">“assert“</a> packages with npm before any of this will work.</p>
<pre><code class="language-javascript">var webdriver = require('selenium-webdriver'),
    assert = require('assert'),
    driver;

driver = new webdriver.Builder().usingServer('http://localhost:4444/wd/hub').withCapabilities({
   'browserName': 'chrome'
}).build();
</code></pre>
<p>Now that our webdriver is working, we just need to kick off our tests.</p>
<pre><code class="language-javascript">// describe() is from Mocha
describe(“Open the webpage“, function () {

   // This makes the WebDriver navigate to the page you want to test
   driver.get(“http://mywebsite.com/mypage“);
   
   // it() is for Mocha testing
   it(“Should open do my asynchronous bidding“, function (done) {

      // By default, Mocha's timeout is only a couple of seconds,
      // which is usually too short for asynchronous calls
      this.timeout(500000);
      
      // driver.executeAsyncScript() allows us to run a script in the browser
      driver.executeAsyncScript(

      // Everything inside here will be executed by the browser, not the server
      function (secondValue) {

        // This is the callback function we can call when everything is done
        var cb = arguments[ arguments.length - 1 ];

        // We'll use setTimeout() to make the script
        // wait before calling the callback
        setTimeout(function () {
           cb({
              firstValue: 1,
              secondValue: secondValue
           });
        }, 3000);

      },
      
      // You can pass variables from the server-side to the client-side 
      // by making them additional arguments
      'My Second Value'

      // This is the callback that is fired when the
      // script is done executing in the browser
      ).then(function (obj) {
         assert.equal(obj.firstValue, 1);
         assert.equal(obj.secondValue, 'My Second Value');
         done();
      });

   });
});
</code></pre>
<p>As you can see, using the executeAsyncScript() method can be invaluable.</p>
<p>Have you played around with the Node Selenium WebDriver yet? What do you think of it?</p>
</div>
            </section>

            <section class="subscribe-form">
                <h3 class="subscribe-form-title">Subscribe to Tyson Cadenhead</h3>
                <p>Get the latest posts delivered right to your inbox</p>
                <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"><input class="location" type="hidden" name="location"><input class="referrer" type="hidden" name="referrer">

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email" placeholder="youremail@example.com">
    </div>
    <button class="" type="submit"><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>


            </section>

            <footer class="post-full-footer">

                <section class="author-card">
                        <img class="author-profile-image" src="//www.gravatar.com/avatar/283773207d6e2c2b9f2a86f7088a7328?s=250&d=mm&r=x" alt="Tyson Cadenhead">
                    <section class="author-card-content">
                        <h4 class="author-card-name"><a href="../author/tysoncadenhead/">Tyson Cadenhead</a></h4>
                            <p>Read <a href="../author/tysoncadenhead/">more posts</a> by this author.</p>
                    </section>
                </section>
                <div class="post-full-footer-right">
                    <a class="author-card-button" href="../author/tysoncadenhead/">Read More</a>
                </div>

            </footer>


        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">

                <article class="post-card post">
        <a class="post-card-image-link" href="../unit-testing-with-thrill-js/">
            <div class="post-card-image" style="background-image: url(../content/images/2017/09/11-3.png)"></div>
        </a>
    <div class="post-card-content">
        <a class="post-card-content-link" href="../unit-testing-with-thrill-js/">
            <header class="post-card-header">
                <h2 class="post-card-title">Unit Testing with Thrill.js</h2>
            </header>
            <section class="post-card-excerpt">
                <p>Functional testing the DOM can be a daunting task. Tools like Qunit and Mocha make it easier, but the real trick is automating the testing process from the Terminal so that it can</p>
            </section>
        </a>
        <footer class="post-card-meta">
                <img class="author-profile-image" src="//www.gravatar.com/avatar/283773207d6e2c2b9f2a86f7088a7328?s=250&d=mm&r=x" alt="Tyson Cadenhead">
            <span class="post-card-author"><a href="../author/tysoncadenhead/">Tyson Cadenhead</a></span>
        </footer>
    </div>
</article>

                <article class="post-card post">
        <a class="post-card-image-link" href="../compoundjs-routes/">
            <div class="post-card-image" style="background-image: url(../content/images/2017/09/13-2.png)"></div>
        </a>
    <div class="post-card-content">
        <a class="post-card-content-link" href="../compoundjs-routes/">
            <header class="post-card-header">
                <h2 class="post-card-title">Compound.js Routes</h2>
            </header>
            <section class="post-card-excerpt">
                <p>Previously, I introduced you to Compound, an awesome MVC framework for NodeJS. Today, I am going to expound on how the routing works in Compound. If you are not familiar with how MVC</p>
            </section>
        </a>
        <footer class="post-card-meta">
                <img class="author-profile-image" src="//www.gravatar.com/avatar/283773207d6e2c2b9f2a86f7088a7328?s=250&d=mm&r=x" alt="Tyson Cadenhead">
            <span class="post-card-author"><a href="../author/tysoncadenhead/">Tyson Cadenhead</a></span>
        </footer>
    </div>
</article>

        </div>
    </div>
</aside>

<div class="floating-header">
    <div class="floating-header-logo">
        <a href="../">
            <span>Tyson Cadenhead</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">executeAsyncScript() in Selenium Webdriver for Node</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=executeAsyncScript()%20in%20Selenium%20Webdriver%20for%20Node&url=http://tysoncadenhead.com/executeasyncscript-in-selenium-webdriver-for-node/" onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=http://tysoncadenhead.com/executeasyncscript-in-selenium-webdriver-for-node/" onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="../">Tyson Cadenhead</a> &copy; 2017</section>
                <nav class="site-footer-nav">
                    <a href="../">Latest Posts</a>
                    <a href="https://www.facebook.com/tysoncadenhead" target="_blank">Facebook</a>
                    <a href="https://twitter.com/tysoncadenhead" target="_blank">Twitter</a>
                    <a href="https://ghost.org" target="_blank">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <div id="subscribe" class="subscribe-overlay">
        <a class="subscribe-overlay-close" href="#"></a>
        <div class="subscribe-overlay-content">
                <img class="subscribe-overlay-logo" src="../content/images/2017/09/1-2.png" alt="Tyson Cadenhead">
            <h1 class="subscribe-overlay-title">Subscribe to Tyson Cadenhead</h1>
            <p class="subscribe-overlay-description">Stay up to date! Get all the latest &amp; greatest posts delivered straight to your inbox</p>
            <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"><input class="location" type="hidden" name="location"><input class="referrer" type="hidden" name="referrer">

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email" placeholder="youremail@example.com">
    </div>
    <button class="" type="submit"><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>


        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="../assets/js/jquery.fitvids.js"></script>


    

    <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19696495-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

</script>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

</body>
</html>
